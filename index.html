<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Versioneye-php by digitalkaoz</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Versioneye-php</h1>
        <p>a PHP CLI tool and library for interacting with the VersionEye API</p>
        <p class="view"><a href="https://github.com/digitalkaoz/versioneye-php">View the Project on GitHub <small>digitalkaoz/versioneye-php</small></a></p>
        <ul>
          <li><a href="https://github.com/digitalkaoz/versioneye-php/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/digitalkaoz/versioneye-php/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/digitalkaoz/versioneye-php">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a id="a-php-clilibrary-for-the-versioneye-api" class="anchor" href="#a-php-clilibrary-for-the-versioneye-api" aria-hidden="true"><span class="octicon octicon-link"></span></a>a PHP CLI/Library for the VersionEye API</h1>

<p>see <a href="https://www.versioneye.com/api/">https://www.versioneye.com/api/</a> for API documentation</p>

<p><a href="https://travis-ci.org/digitalkaoz/versioneye-php"><img src="https://img.shields.io/travis/digitalkaoz/versioneye-php/master.svg?style=flat-square" alt="Build Status"></a>
<a href="https://www.versioneye.com/php/digitalkaoz:versioneye-php"><img src="https://img.shields.io/versioneye/d/php/digitalkaoz:versioneye-php.svg?style=flat-square" alt="Dependency Status"></a>
<a href="https://scrutinizer-ci.com/g/digitalkaoz/versioneye-php/?branch=master"><img src="https://img.shields.io/scrutinizer/g/digitalkaoz/versioneye-php.svg?style=flat-square" alt="Scrutinizer Code Quality"></a>
<a href="https://scrutinizer-ci.com/g/digitalkaoz/versioneye-php/?branch=master"><img src="https://img.shields.io/scrutinizer/coverage/g/digitalkaoz/versioneye-php/master.svg?style=flat-square" alt="Code Coverage"></a>
<a href="https://insight.sensiolabs.com/projects/f7633a7e-4577-4a86-b6d9-ccaa75cb7fa0"><img src="https://img.shields.io/sensiolabs/i/f7633a7e-4577-4a86-b6d9-ccaa75cb7fa0.svg?style=flat-square" alt="SensioLabsInsight"></a>
<a href="https://packagist.org/packages/digitalkaoz/versioneye-php"><img src="https://img.shields.io/packagist/v/digitalkaoz/versioneye-php.svg?style=flat-square" alt="Latest Stable Version"></a>
<a href="https://packagist.org/packages/digitalkaoz/versioneye-php"><img src="https://img.shields.io/packagist/dt/digitalkaoz/versioneye-php.svg?style=flat-square" alt="Total Downloads"></a></p>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>There are 2 ways to install it: </p>

<ul>
<li>Download the Phar (recommended)</li>
<li>Install from source code</li>
</ul>

<h3>
<a id="download-the-phar-recommended" class="anchor" href="#download-the-phar-recommended" aria-hidden="true"><span class="octicon octicon-link"></span></a>Download the Phar (recommended)</h3>

<p>download the latest version from the <a href="https://github.com/digitalkaoz/versioneye-php/releases/latest">Releases section</a> or from the cli:</p>

<pre><code>$ wget https://github.com/digitalkaoz/versioneye-php/releases/download/0.8.0/versioneye.phar //or latest stable
</code></pre>

<h3>
<a id="install-from-source-code" class="anchor" href="#install-from-source-code" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install from source code</h3>

<p>first you have to decide which <code>http adapter</code> to use. The library supports all adapters supported by <a href="https://github.com/egeloen/ivory-http-adapter">egeloen/ivory-http-adapter</a>
Where <code>fopen</code> is last resort if even <code>curl</code> is missing.</p>

<pre><code>$ composer require "digitalkaoz/versioneye-php" @stable
</code></pre>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h2>

<p>all API endpoints are implemented, see <a href="https://www.versioneye.com/api/v2/swagger_doc.json">https://www.versioneye.com/api/v2/swagger_doc.json</a> for their detailed docs.</p>

<h3>
<a id="programmatic" class="anchor" href="#programmatic" aria-hidden="true"><span class="octicon octicon-link"></span></a>programmatic:</h3>

<div class="highlight highlight-php"><pre><span class="pl-pse">&lt;?php</span><span class="pl-s1"></span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">use</span> <span class="pl-c1">Rs\VersionEye\Client</span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$api</span> <span class="pl-k">=</span> (<span class="pl-k">new</span> <span class="pl-c1">Client</span>())<span class="pl-k">-&gt;</span>api(<span class="pl-s"><span class="pl-pds">'</span>services<span class="pl-pds">'</span></span>);     <span class="pl-c">// Rs\VersionEye\Api\Services</span></span>
<span class="pl-s1"><span class="pl-smi">$api</span><span class="pl-k">-&gt;</span>ping(); <span class="pl-c">//array</span></span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c">//other implemented APIs</span></span>
<span class="pl-s1"><span class="pl-smi">$api</span> <span class="pl-k">=</span> (<span class="pl-k">new</span> <span class="pl-c1">Client</span>())<span class="pl-k">-&gt;</span>api(<span class="pl-s"><span class="pl-pds">'</span>github<span class="pl-pds">'</span></span>);       <span class="pl-c">// Rs\VersionEye\Api\Github</span></span>
<span class="pl-s1"><span class="pl-smi">$api</span> <span class="pl-k">=</span> (<span class="pl-k">new</span> <span class="pl-c1">Client</span>())<span class="pl-k">-&gt;</span>api(<span class="pl-s"><span class="pl-pds">'</span>me<span class="pl-pds">'</span></span>);           <span class="pl-c">// Rs\VersionEye\Api\Me</span></span>
<span class="pl-s1"><span class="pl-smi">$api</span> <span class="pl-k">=</span> (<span class="pl-k">new</span> <span class="pl-c1">Client</span>())<span class="pl-k">-&gt;</span>api(<span class="pl-s"><span class="pl-pds">'</span>projects<span class="pl-pds">'</span></span>);     <span class="pl-c">// Rs\VersionEye\Api\Projects</span></span>
<span class="pl-s1"><span class="pl-smi">$api</span> <span class="pl-k">=</span> (<span class="pl-k">new</span> <span class="pl-c1">Client</span>())<span class="pl-k">-&gt;</span>api(<span class="pl-s"><span class="pl-pds">'</span>products<span class="pl-pds">'</span></span>);     <span class="pl-c">// Rs\VersionEye\Api\Products</span></span>
<span class="pl-s1"><span class="pl-smi">$api</span> <span class="pl-k">=</span> (<span class="pl-k">new</span> <span class="pl-c1">Client</span>())<span class="pl-k">-&gt;</span>api(<span class="pl-s"><span class="pl-pds">'</span>sessions<span class="pl-pds">'</span></span>);     <span class="pl-c">// Rs\VersionEye\Api\Sessions</span></span>
<span class="pl-s1"><span class="pl-smi">$api</span> <span class="pl-k">=</span> (<span class="pl-k">new</span> <span class="pl-c1">Client</span>())<span class="pl-k">-&gt;</span>api(<span class="pl-s"><span class="pl-pds">'</span>users<span class="pl-pds">'</span></span>);        <span class="pl-c">// Rs\VersionEye\Api\Users</span></span>
<span class="pl-s1"></span></pre></div>

<h3>
<a id="cli" class="anchor" href="#cli" aria-hidden="true"><span class="octicon octicon-link"></span></a>cli:</h3>

<p>Here some usage examples.</p>

<pre><code>$ bin/versioneye services:ping
$ bin/versioneye products:search symfony
</code></pre>

<p>Or with the phar file. </p>

<pre><code>php versioneye.phar products:search "symfony"
php versioneye.phar products:show "php" "symfony:symfony"
</code></pre>

<p>The last command requires that you have setup your <a href="https://www.versioneye.com/settings/api">API Key</a> correctly. </p>

<h2>
<a id="configuration" class="anchor" href="#configuration" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configuration</h2>

<p>to store your <a href="https://www.versioneye.com/settings/api">generated API Token</a> globally you can create a global config file in your home directory:</p>

<p><code>~/.veye.rc</code> we share the same config file with the ruby cli <a href="https://github.com/versioneye/veye">https://github.com/versioneye/veye</a></p>

<p>the file would look like:</p>

<pre lang="rc"><code>:api_key: YOUR_API_TOKEN
</code></pre>

<p>now you dont have to pass your token on each call!</p>

<h2>
<a id="cli-tool" class="anchor" href="#cli-tool" aria-hidden="true"><span class="octicon octicon-link"></span></a>CLI Tool</h2>

<p>to build a standalone phar, simply execute the following commands.</p>

<pre><code>$ composer require --dev kherge/box @stable
$ vendor/bin/box build
$ php versioneye-php.phar
</code></pre>

<h2>
<a id="commands" class="anchor" href="#commands" aria-hidden="true"><span class="octicon octicon-link"></span></a>Commands:</h2>

<p>The Commands are autogenerated by introspecting the API Implementations. Each Public Method is a Command, each Method Parameter will be translated into a InputArgument or InputOption.</p>

<pre><code>github
  github:delete            remove imported project
  github:hook              GitHub Hook
  github:import            imports project file from github
  github:repos             lists your's github repos
  github:show              shows the detailed information for the repository
  github:sync              re-load github data
me
  me:comments              shows comments of authorized user
  me:favorites             shows favorite packages for authorized user
  me:notifications         shows unread notifications of authorized user
  me:profile               shows profile of authorized user
products
  products:follow          follow your favorite software package
  products:follow-status   check your following status
  products:references      references
  products:search          search packages
  products:show            detailed information for specific package
  products:unfollow        unfollow given software package
projects
  projects:all             shows user`s projects
  projects:create          upload project file
  projects:delete          delete given project
  projects:licenses        get grouped view of licences for dependencies
  projects:show            shows the project's information
  projects:update          update project with new file
services
  services:ping            Answers to request with basic pong.
sessions
  sessions:close           delete current session aka log out.
  sessions:open            creates new sessions
  sessions:show            returns session info for authorized users
users
  users:comments           shows user's comments
  users:favorites          shows user's favorite packages
  users:show               shows profile of given user_id
</code></pre>

<h2>
<a id="faq" class="anchor" href="#faq" aria-hidden="true"><span class="octicon octicon-link"></span></a>FAQ</h2>

<h3>
<a id="implement-a-new-http-adapter" class="anchor" href="#implement-a-new-http-adapter" aria-hidden="true"><span class="octicon octicon-link"></span></a>implement a new HTTP Adapter</h3>

<p>simply implement the <code>Rs\VersionEye\Http\HttpClient</code> Interface:</p>

<div class="highlight highlight-php"><pre><span class="pl-pse">&lt;?php</span><span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">class</span> <span class="pl-en">MyHttpClient</span> <span class="pl-k">implements</span> <span class="pl-e">HttpClient</span></span>
<span class="pl-s1">{</span>
<span class="pl-s1">    <span class="pl-c">/**</span></span>
<span class="pl-s1"><span class="pl-c">     * @inheritDoc</span></span>
<span class="pl-s1"><span class="pl-c">     */</span></span>
<span class="pl-s1">    <span class="pl-k">public</span> <span class="pl-k">function</span> <span class="pl-en">request</span>(<span class="pl-smi">$method</span>, <span class="pl-smi">$url</span>, <span class="pl-k">array</span> <span class="pl-smi">$params</span> <span class="pl-k">=</span> [])</span>
<span class="pl-s1">    {</span>
<span class="pl-s1">        <span class="pl-c">//implement your own special http handling here</span></span>
<span class="pl-s1">    }</span>
<span class="pl-s1">}</span></pre></div>

<p>and then pass it the the Client:</p>

<div class="highlight highlight-php"><pre><span class="pl-s1"><span class="pl-k">&lt;</span>?<span class="pl-c1">php</span> </span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$api</span> <span class="pl-k">=</span> (<span class="pl-k">new</span> <span class="pl-c1">Client</span>(<span class="pl-k">new</span> <span class="pl-c1">MyHttpClient</span>))<span class="pl-k">-&gt;</span>api(<span class="pl-s"><span class="pl-pds">'</span>users<span class="pl-pds">'</span></span>);</span></pre></div>

<h3>
<a id="writing-a-new-api" class="anchor" href="#writing-a-new-api" aria-hidden="true"><span class="octicon octicon-link"></span></a>writing a new Api</h3>

<p>simply implement the <code>Rs\VersionEye\Api\Api</code> Interface:</p>

<div class="highlight highlight-php"><pre><span class="pl-pse">&lt;?php</span><span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">namespace</span> <span class="pl-en">Rs\VersionEye\Api</span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">class</span> <span class="pl-en">Foo</span> <span class="pl-k">implements</span> <span class="pl-e">Api</span></span>
<span class="pl-s1">{</span>
<span class="pl-s1">    <span class="pl-c">/**</span></span>
<span class="pl-s1"><span class="pl-c">     * awesome api endpoint</span></span>
<span class="pl-s1"><span class="pl-c">     */</span></span>
<span class="pl-s1">    <span class="pl-k">public</span> <span class="pl-k">function</span> <span class="pl-en">bar</span>(<span class="pl-smi">$bar</span>, <span class="pl-smi">$bazz</span><span class="pl-k">=</span><span class="pl-c1">1</span>)</span>
<span class="pl-s1">    {</span>
<span class="pl-s1">        <span class="pl-c">//implement api endpoint</span></span>
<span class="pl-s1">    }</span>
<span class="pl-s1">}</span></pre></div>

<p>the you have to register the Api in the <code>CommandFactory</code> (maybe even that could be autogenerated by searching all implementors of Interface <code>Rs\VersionEye\Api\Api</code>):</p>

<div class="highlight highlight-php"><pre><span class="pl-s1"><span class="pl-k">&lt;</span>?<span class="pl-c1">php</span> </span>
<span class="pl-s1"><span class="pl-k">class</span> <span class="pl-en">CommandFactory</span></span>
<span class="pl-s1">{</span>
<span class="pl-s1">    <span class="pl-c">/**</span></span>
<span class="pl-s1"><span class="pl-c">     * generates Commands from all Api Methods</span></span>
<span class="pl-s1"><span class="pl-c">     *</span></span>
<span class="pl-s1"><span class="pl-c">     * <span class="pl-k">@param</span>  array     $classes</span></span>
<span class="pl-s1"><span class="pl-c">     * <span class="pl-k">@return</span> Command[]</span></span>
<span class="pl-s1"><span class="pl-c">     */</span></span>
<span class="pl-s1">    <span class="pl-k">public</span> <span class="pl-k">function</span> <span class="pl-en">generateCommands</span>(<span class="pl-k">array</span> <span class="pl-smi">$classes</span> <span class="pl-k">=</span> [])</span>
<span class="pl-s1">    {</span>
<span class="pl-s1">        <span class="pl-smi">$classes</span> <span class="pl-k">=</span> <span class="pl-smi">$classes</span> ?: [</span>
<span class="pl-s1">            <span class="pl-c">//...</span></span>
<span class="pl-s1">            <span class="pl-s"><span class="pl-pds">'</span>Rs\VersionEye\Api\Foo<span class="pl-pds">'</span></span></span>
<span class="pl-s1">        ];</span>
<span class="pl-s1">    }</span>
<span class="pl-s1">}    </span></pre></div>

<p>be aware that each public method would be exposed as <code>Command</code>. Mandatory Parameters will be <code>InputArgument</code>s, optionals will be a <code>InputOption</code>. The Command description would be taken from the <code>phpdoc</code>!</p>

<p>So the above example will be generated to this <code>Command</code>:</p>

<pre><code>foo:bar --bazz=1 bar      //awesome api endpoint
</code></pre>

<h3>
<a id="writing-a-new-console-output-formatter" class="anchor" href="#writing-a-new-console-output-formatter" aria-hidden="true"><span class="octicon octicon-link"></span></a>Writing a new Console Output Formatter</h3>

<p>by default the <code>Command</code> tries to find the same API method in the Output Classes (if not it will output the data as simple <code>print_r</code>:</p>

<p><code>Rs\VersionEye\Api\Github:sync</code> <strong>API</strong> ----&gt; <code>Rs\VersionEye\Output\Github:sync</code> <strong>Output</strong></p>

<p>so for the above Example simply create the following Class:</p>

<div class="highlight highlight-php"><pre><span class="pl-pse">&lt;?php</span><span class="pl-s1"></span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">namespace</span> <span class="pl-en">Rs\VersionEye\Output</span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">class</span> <span class="pl-en">Foo</span></span>
<span class="pl-s1">{</span>
<span class="pl-s1">    <span class="pl-k">public</span> <span class="pl-k">function</span> <span class="pl-en">bar</span>(<span class="pl-c1">OutputInterface</span> <span class="pl-smi">$output</span>, <span class="pl-smi">$response</span>)</span>
<span class="pl-s1">    {</span>
<span class="pl-s1">        <span class="pl-c">//output the $response (API Result)</span></span>
<span class="pl-s1">    }</span>
<span class="pl-s1">}</span></pre></div>

<p>thats all.</p>

<h2>
<a id="tests" class="anchor" href="#tests" aria-hidden="true"><span class="octicon octicon-link"></span></a>Tests</h2>

<pre><code>$ composer require --dev henrikbjorn/phpspec-code-coverage "1.0.*@dev"
$ vendor/bin/phpspec run
</code></pre>
      </section>
    </div>
    <footer>
      <p>Project maintained by <a href="https://github.com/digitalkaoz">digitalkaoz</a></p>
      <p>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></p>
    </footer>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>